jQuery(document).ready(function($){function e(){var e=Math.ceil(2*o/d),t=n>s?1.1/Math.sin(Math.PI/2-n*Math.PI/180):1.1/Math.sin(Math.PI/2-s*Math.PI/180),r=Math.ceil(2*o*t),a=Math.ceil(r/d),l=o-r/2,i=(e-a)/2;$(".cd-background-wrapper").css({height:e}),$(".cd-floating-background").addClass("is-absolute").css({left:l,top:i,width:r})}function t(e){var t=(-e.pageX+o)/o*n,r=(e.pageY-a)/a*s;t>n&&(t=n),-n>t&&(t=-n),r>s&&(r=s),-s>r&&(r=-s),$(".cd-floating-background").css({"-moz-transform":"rotateX("+r+"deg) rotateY("+t+"deg) translateZ(0)","-webkit-transform":"rotateX("+r+"deg) rotateY("+t+"deg) translateZ(0)","-ms-transform":"rotateX("+r+"deg) rotateY("+t+"deg) translateZ(0)","-o-transform":"rotateX("+r+"deg) rotateY("+t+"deg) translateZ(0)",transform:"rotateX("+r+"deg) rotateY("+t+"deg) translateZ(0)"})}var r=window.getComputedStyle(document.querySelector(".cd-background-wrapper"),"::before").getPropertyValue("content").replace(/"/g,""),a=.5*$(window).height(),o=.5*$(window).width(),n=5,s=3,d;$(".cd-floating-background").find("img").eq(0).load(function(){d=$(this).width()/$(this).height(),"web"==r&&$("html").hasClass("preserve-3d")&&e()}).each(function(){this.complete&&$(this).load()}),$(".cd-background-wrapper").on("mousemove",function(e){"web"==r&&$("html").hasClass("preserve-3d")&&window.requestAnimationFrame(function(){t(e)})}),$(window).on("resize",function(){r=window.getComputedStyle(document.querySelector(".cd-background-wrapper"),"::before").getPropertyValue("content").replace(/"/g,""),"web"==r&&$("html").hasClass("preserve-3d")?window.requestAnimationFrame(function(){a=.5*$(window).height(),o=.5*$(window).width(),e()}):($(".cd-background-wrapper").attr("style",""),$(".cd-floating-background").attr("style","").removeClass("is-absolute"))})}),function e(){var e=document.createElement("p"),t=document.getElementsByTagName("html")[0],r=document.getElementsByTagName("body")[0],a={webkitTransformStyle:"-webkit-transform-style",MozTransformStyle:"-moz-transform-style",msTransformStyle:"-ms-transform-style",transformStyle:"transform-style"};r.insertBefore(e,null);for(var o in a)void 0!==e.style[o]&&(e.style[o]="preserve-3d");var n=window.getComputedStyle(e,null),s=n.getPropertyValue("-webkit-transform-style")||n.getPropertyValue("-moz-transform-style")||n.getPropertyValue("-ms-transform-style")||n.getPropertyValue("transform-style");t.className+="preserve-3d"!==s?" no-preserve-3d":" preserve-3d",document.body.removeChild(e)}();